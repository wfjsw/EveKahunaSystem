<div align="center">

# ğŸŒŸ Kahuna System ğŸŒŸ

![Logo](https://github.com/user-attachments/assets/40c09a45-f898-4167-9315-20df6a1dc59a)

[![å¼€å‘çŠ¶æ€](https://img.shields.io/badge/çŠ¶æ€-å¼€å‘ä¸­-yellow)](https://github.com/AraragiEro/astrbot_plugin_kahunabot)
[![EVE Online](https://img.shields.io/badge/æ¸¸æˆ-EVE%20Online-blue)](https://www.eveonline.com/)
[![Quart](https://img.shields.io/badge/æ¡†æ¶-Quart-green)](https://github.com/AstrBotDevs/AstrBot.git)
[![Vue3](https://img.shields.io/badge/æ¡†æ¶-Vue3-green)](https://github.com/AstrBotDevs/AstrBot.git)

_ç¬¨ç¬¨çš„kahunaä¸åœçš„è®¡ç®—è‡ªå·±ç¦»ä¹°ç‰›è§’åŒ…è¿˜æœ‰å¤šè¿œ_

_ä¸€åº§æ–°çš„**X**å±±æ‹”åœ°è€Œèµ·ï¼_

ğŸ¥° _çˆ±æ¥è‡ª å‡›å†¬è”ç›Ÿç¾¤ ç´«ç«¹æ¢…é‡å·¥_

![sty](https://github.com/user-attachments/assets/f37a6a06-b925-4836-8561-282720f06506)

</div>

åŸºäº Quart å’Œ Vue3 çš„ EVE Online ä¸€ä½“åŒ– Web åº”ç”¨å¹³å°ï¼Œä¸ºç©å®¶æä¾›å¸‚åœºä»·æ ¼æŸ¥è¯¢ã€æˆæœ¬è®¡ç®—ã€å·¥ä¸šè§„åˆ’ç­‰ç»¼åˆæœåŠ¡ã€‚

## é¡¹ç›®ç®€ä»‹

Kahuna System æ˜¯ä¸€ä¸ªä¸“ä¸º EVE Online ç©å®¶è®¾è®¡çš„ Web åº”ç”¨å¹³å°ï¼Œé›†æˆäº†å¸‚åœºæ•°æ®åˆ†æã€å·¥ä¸šåˆ¶é€ è§„åˆ’ã€èµ„äº§ç»Ÿè®¡ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚å¹³å°é‡‡ç”¨ç°ä»£åŒ–çš„å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæä¾›ç›´è§‚çš„ç”¨æˆ·ç•Œé¢å’Œå¼ºå¤§çš„è®¡ç®—èƒ½åŠ›ã€‚

## æ ¸å¿ƒåŠŸèƒ½

- **å¸‚åœºä»·æ ¼æŸ¥è¯¢** - æ”¯æŒå‰ä»–å’Œè”ç›Ÿå¸‚åœºå®æ—¶ä»·æ ¼æŸ¥è¯¢
- **æˆæœ¬è®¡ç®—** - ç²¾ç¡®è®¡ç®—åˆ¶é€ å’Œé‡‡è´­æˆæœ¬
- **å·¥ä¸šè§„åˆ’** - æ™ºèƒ½å·¥ä¸šåˆ¶é€ è§„åˆ’ä¸æŠ¥è¡¨è¾“å‡º
- **åŒ–çŸ¿åˆ†æ** - çŸ¿çŸ³ç²¾ç‚¼ä¸ææ–™åˆ†æ
- **é‡‡è´­æ¸…å•** - å¯è‡ªå®šä¹‰æ•°æ®æ¥æºçš„é‡‡è´­æ¸…å•ç®¡ç†
- **åˆ©æ¶¦åˆ†æ** - æ·±åº¦åˆ©æ¶¦åˆ†æä¸å¸‚åœºæœºä¼šæŒ–æ˜
- **æŒ‚å•åˆ†æ** - å¸‚åœºè®¢å•åˆ†æä¸ä¼˜åŒ–å»ºè®®
- **èµ„äº§ç»Ÿè®¡** - è§’è‰²å’Œå…¬å¸èµ„äº§ç»Ÿè®¡ä¸ç®¡ç†

## æŠ€æœ¯æ ˆ

- **åç«¯**: Quart (Python 3.13+), Hypercorn
- **å‰ç«¯**: Vue 3, TypeScript, Element Plus, ECharts
- **æ•°æ®åº“**: SQLite / PostgreSQL, Neo4j, Redis
- **å…¶ä»–**: ESI API, OAuth2

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.13 æˆ–æ›´é«˜ç‰ˆæœ¬
- Node.js 18+ (ç”¨äºå‰ç«¯å¼€å‘)
- æ•°æ®åº“ï¼šSQLite (é»˜è®¤) æˆ– PostgreSQL + Neo4j + Redis (å¯é€‰)

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**

```bash
git clone https://github.com/AraragiEro/astrbot_plugin_kahunabot.git
cd astrbot_plugin_kahunabot
```

2. **å®‰è£…åç«¯ä¾èµ–**

ä½¿ç”¨ `uv` (æ¨è):
```bash
uv sync
```

æˆ–ä½¿ç”¨ `pip`:
```bash
pip install -r requirements.txt
```

3. **å®‰è£…å‰ç«¯ä¾èµ–**

```bash
cd src_v2/frontend
npm install
```

4. **å‡†å¤‡ SDE æ•°æ®åº“**

é¡¹ç›®éœ€è¦ EVE Online çš„ SDE (Static Data Export) æ•°æ®åº“ã€‚ä½ å¯ä»¥ä½¿ç”¨ [EVE-SDE-Database-Builder](https://github.com/EVEIPH/EVE-SDE-Database-Builder) å·¥å…·ç”Ÿæˆ SQLite æ ¼å¼çš„è‹±æ–‡å’Œä¸­æ–‡ SDE æ•°æ®åº“ã€‚

å®˜æ–¹ SDE æ•°æ®ä¸‹è½½åœ°å€: [https://developers.eveonline.com/](https://developers.eveonline.com/)

5. **é…ç½® EVE API**

å‰å¾€ [EVE Online å¼€å‘è€…ä¸­å¿ƒ](https://developers.eveonline.com/) åˆ›å»ºåº”ç”¨ï¼Œè·å– `CLIENT_ID` å’Œ `SECRET_KEY`ã€‚

6. **å¯åŠ¨æœåŠ¡**

å¼€å‘æ¨¡å¼:
```bash
python run_server.py --dev --host 0.0.0.0 --port 9527
```

ç”Ÿäº§æ¨¡å¼:
```bash
# å…ˆæ„å»ºå‰ç«¯
cd src_v2/frontend
npm run build
cd ../..

# å¯åŠ¨æœåŠ¡
python run_server.py --prod --host 0.0.0.0 --port 9527
```

æˆ–ä½¿ç”¨æä¾›çš„è„šæœ¬ (Linux/macOS):
```bash
./run_server.sh dev    # å¼€å‘æ¨¡å¼
./run_server.sh start  # ç”Ÿäº§æ¨¡å¼
./run_server.sh stop   # åœæ­¢æœåŠ¡
```

å¯åŠ¨æˆåŠŸåï¼Œè®¿é—® `http://localhost:9527` å³å¯ä½¿ç”¨å¹³å°ã€‚

## é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶

é¡¹ç›®ä½¿ç”¨ TOML æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚å°† `config.toml.example` å¤åˆ¶ä¸º `config.toml` å¹¶å¡«å†™ç›¸åº”é…ç½®ã€‚

### ä¸»è¦é…ç½®é¡¹

#### [APP] - åº”ç”¨åŸºç¡€é…ç½®
```toml
[APP]
# å›¾ç‰‡æ¸²æŸ“ä»£ç† (ç•™ç©ºåˆ™ä¸ä½¿ç”¨)
PIC_RENDER_PROXY = ""
# ä»£ç†æœåŠ¡å™¨åœ°å€
PROXY = "127.0.0.1"
# ä»£ç†ç«¯å£
PORT = 7890
```

#### [SQLITEDB] - SQLite æ•°æ®åº“é…ç½®
```toml
[SQLITEDB]
# é…ç½®æ•°æ®åº“è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„ï¼‰
CONFIG_DB = "/path/to/kahuna.db"
CACHE_DB = "/path/to/cache.db"
# SDE æ•°æ®åº“è·¯å¾„
SDEDB = "/path/to/sde.db"           # è‹±æ–‡ SDE æ•°æ®åº“
CN_SDEDB = "/path/to/sde_cn.db"     # ä¸­æ–‡ SDE æ•°æ®åº“
```

#### [POSTGREDB] - PostgreSQL æ•°æ®åº“é…ç½® (å¯é€‰)
```toml
[POSTGREDB]
Host = "localhost"
Port = 5432
Database = "kahuna"
User = "admin"
Password = "secret"
```

#### [REDIS] - Redis é…ç½® (å¯é€‰)
```toml
[REDIS]
Host = "localhost"
Port = 6379
```

#### [NEO4J] - Neo4j å›¾æ•°æ®åº“é…ç½® (å¯é€‰)
```toml
[NEO4J]
Host = "localhost"
Port = 7687
Username = "neo4j"
Password = "password"
```

#### [EVE] - EVE Online API é…ç½®
```toml
[EVE]
# åœ¨ https://developers.eveonline.com/ ç”³è¯·åº”ç”¨è·å–
CLIENT_ID = "your_client_id"
SECRET_KEY = "your_secret_key"
# å›è°ƒåœ°å€
CALLBACK_LOCAL_HOST = ""
CALLBACK_LOCAL_ADD = "https://localhost:9527/"
```

#### [ESI] - ESI API æƒé™é…ç½®

æ ¹æ®ä½ çš„éœ€æ±‚å¯ç”¨æˆ–ç¦ç”¨ç›¸åº”çš„ ESI æƒé™ã€‚å¸¸ç”¨æƒé™ç¤ºä¾‹ï¼š

```toml
[ESI]
# å…¬å…±æ•°æ®è®¿é—®
publicData = false

# èµ„äº§ç›¸å…³æƒé™
"esi-assets.read_assets.v1" = true
"esi-assets.read_corporation_assets.v1" = true

# å¸‚åœºç›¸å…³æƒé™
"esi-markets.structure_markets.v1" = true
"esi-markets.read_character_orders.v1" = true

# å·¥ä¸šç›¸å…³æƒé™
"esi-industry.read_character_jobs.v1" = true
"esi-industry.read_corporation_jobs.v1" = true

# è“å›¾ç›¸å…³æƒé™
"esi-characters.read_blueprints.v1" = true
"esi-corporations.read_blueprints.v1" = true

# æŠ€èƒ½ç›¸å…³æƒé™
"esi-skills.read_skills.v1" = true

# é’±åŒ…ç›¸å…³æƒé™
"esi-wallet.read_character_wallet.v1" = true
```

å®Œæ•´çš„æƒé™åˆ—è¡¨è¯·å‚è€ƒ `config.toml.example` æ–‡ä»¶ã€‚

### é…ç½®æ–‡ä»¶ä½ç½®

é…ç½®æ–‡ä»¶åº”å‘½åä¸º `config.toml` å¹¶æ”¾ç½®åœ¨é¡¹ç›®æ ¹ç›®å½•ã€‚

## å¼€å‘è®¡åˆ’


- [x] Web åº”ç”¨å¹³å°å¼€å‘
  - [x] å‰ç«¯æ¡†æ¶æ­å»º
  - [x] ESI è®¿é—®é˜Ÿåˆ—æ§åˆ¶
  - [x] æ•°æ®åº“é‡æ„
    - [x] PostgreSQL å’Œ Redis éƒ¨ç½²
- [ ] æ ¸å¿ƒåŠŸèƒ½
  - [x] å·¥ä¸šè®¡åˆ’çš„è®¡ç®—ä¸æ‹†è§£
    - [x] å¯è°ƒæ•´çš„äº§å“æ¸…å•
    - [x] å¯è°ƒæ•´çš„è®¡ç®—é…ç½®
    - [x] è¯¦ç»†çš„æ•°æ®æŠ¥è¡¨
      - [x] è®¡åˆ’åˆ†è§£æ ‘
      - [x] ææ–™æ¸…å•
      - [x] å¯å‚è€ƒå¯æ‰§è¡Œçš„å·¥ä½œæµ
      - [x] å¯å¤åˆ¶çš„é‡‡è´­æ¸…å•
      - [x] æˆæœ¬æˆåˆ†æ¯”ä¾‹åˆ†æ
      - [x] åˆä½œå·¥ä¸šçš„è–ªæ°´è®¡ç®—
      - [x] å¯å‚è€ƒçš„ç‰©æµè®¡åˆ’
  - [ ] å¸‚åœºåˆ†æ
    - [ ] å¸‚åœºä»·æ ¼æŸ¥çœ‹
    - [ ] è‡ªé€‰æ¸…å•çš„ä»·æ ¼ç›‘æ§
    - [ ] è‡ªé€‰äº§å“æ¸…å•çš„åˆ©æ¶¦è®¡ç®—
    - [ ] å¸‚åœºå•å“çš„è¯¦ç»†æ•°æ®è®¡ç®—ã€æˆæœ¬ã€åˆ©æ¶¦ç­‰ã€‘
    - [ ] ç‰¹å®šæ˜ŸåŸŸçš„å¸‚åœºåˆ©æ¶¦è®¡ç®—
- [ ] å…¶ä»–
  - [x] æœåŠ¡æƒé™åˆ†çº§
  - [ ] é‚€è¯·ç ç”Ÿæˆ
  - [ ] æ€§èƒ½ä¼˜åŒ–
  - [ ] ç”¨æˆ·ä½“éªŒæ”¹è¿›
  - [ ] æ–‡æ¡£å®Œå–„

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **GNU Affero General Public License v3.0 (AGPL-3.0)** è®¸å¯è¯ã€‚

è¿™æ„å‘³ç€ï¼š
- ä½ å¯ä»¥è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘æœ¬è½¯ä»¶
- å¦‚æœä½ ä¿®æ”¹äº†ä»£ç å¹¶åœ¨ç½‘ç»œä¸Šæä¾›æœåŠ¡ï¼Œå¿…é¡»å…¬å¼€ä¿®æ”¹åçš„æºä»£ç 
- ä½¿ç”¨æœ¬è½¯ä»¶çš„æœåŠ¡ä¹Ÿå¿…é¡»éµå¾ª AGPL-3.0 è®¸å¯è¯

å®Œæ•´çš„è®¸å¯è¯æ–‡æœ¬è¯·æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ç›¸å…³é“¾æ¥

- [EVE Online å®˜ç½‘](https://www.eveonline.com/)
- [EVE Online å¼€å‘è€…ä¸­å¿ƒ](https://developers.eveonline.com/)
